(function(t){function e(e){for(var r,i,o=e[0],u=e[1],c=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},s=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("c21b")},"0ae9":function(t,e,n){"use strict";n("dcb2")},5416:function(t,e,n){"use strict";n("b58d")},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],i={name:"app"},o=i,u=(n("034f"),n("2877")),c=Object(u["a"])(o,a,s,!1,null,null,null),l=c.exports,d=n("8c4f"),p=n("2f62"),f=n("0e44"),m=(n("96cf"),n("1da1")),h=n("bc3a"),v=n.n(h),b={user:null,devices:null},g={isAuthenticated:function(t){return!!t.user},StateUser:function(t){return t.user},StateDevices:function(t){return t.devices}},w={LogIn:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,v.a.post("session/",JSON.stringify(Object.fromEntries(n)),{withCredentials:!0}).then(function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r("setUser",e.data);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),LogOut:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,r=null,n("logout",r);case 3:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),GetDevices:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,v.a.get("device/",{withCredentials:!0}).then(function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n("setDevices",e.data);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log(t)});case 3:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},x={setUser:function(t,e){t.user=e},setDevices:function(t,e){t.devices=e},logout:function(t){t.user=null}},_={state:b,getters:g,actions:w,mutations:x};r["default"].use(p["a"]);var y=new p["a"].Store({modules:{auth:_},plugins:[Object(f["a"])()]}),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"container-fluid pt-3 pb-3"},[n("ControlPanel"),n("div",{staticClass:"row mt-3"},[n("div",{staticClass:"col-sm"},[n("AccountPanel")],1),n("div",{staticClass:"col-sm"})])],1)])},j=[],O=n("5530"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card rounded",attrs:{id:"control-panel"}},[n("div",{staticClass:"card-body text-center text-uppercase"},[n("h1",[t._v(t._s(t.Title))])])])},R=[],$={name:"control-panel",data:function(){return{Title:"Панель управления"}}},S=$,E=(n("5416"),Object(u["a"])(S,k,R,!1,null,"76f26bda",null)),P=E.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card",attrs:{id:"account-panel"}},[n("div",{staticClass:"card-body text-center"},[n("h2",{staticClass:"card-title text-uppercase text-muted"},[t._v("текущее время")]),n("h1",{staticClass:"card-text",attrs:{id:"current-time"}},[t._v(t._s(t.time))]),n("div",{staticClass:"card-body text-center mt-2"},[n("h2",{staticClass:"card-title text-uppercase text-muted"},[t._v("учетная запись:")]),n("h3",{staticClass:"card-text"},[t._v("Логин: "+t._s(this.$store.getters.StateUser.username))]),n("h3",{staticClass:"card-text"},[t._v("Email: "+t._s(this.$store.getters.StateUser.email))]),0==this.$store.getters.StateUser.role?n("button",{staticClass:"btn btn-outline-success ajax-all-workers ml-2 mt-2",attrs:{href:"../control_panel/workers/"}},[t._v("Работники")]):t._e(),0==this.$store.getters.StateUser.role?n("button",{staticClass:"btn btn-outline-primary ajax-all-content ml-2 mt-2",attrs:{href:"../control_panel/contents/"}},[t._v("Альтернативный контент")]):t._e(),n("button",{staticClass:"btn btn-outline-primary ajax-all-clients ml-2 mt-2",attrs:{href:"../control_panel/clients/"}},[t._v("Клиенты")]),n("button",{staticClass:"btn btn-outline-primary ajax-all-devices ml-2 mt-2",attrs:{href:"../control_panel/devices/"}},[t._v("Приставки")]),n("button",{staticClass:"btn btn-outline-warning ml-2 mt-2"},[t._v("Изменить пароль")]),n("button",{staticClass:"btn btn-outline-warning ml-2 mt-2"},[t._v("Изменить Email")]),n("button",{staticClass:"btn btn-outline-danger ml-2 mt-2",on:{click:t.logout}},[t._v("Выйти")])])])])},D=[],L={name:"account-panel",data:function(){return{interval:null,time:null}},beforeDestroy:function(){clearInterval(this.interval)},created:function(){this.timeTick(),this.interval=setInterval(this.timeTick,1e3)},methods:{timeTick:function(){this.time=Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"}).format()},logout:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LogOut");case 2:this.$router.push("/login");case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},A=L,U=Object(u["a"])(A,T,D,!1,null,"17ed379e",null),I=U.exports,M={name:"Home",components:{ControlPanel:P,AccountPanel:I},methods:Object(O["a"])({},Object(p["b"])(["GetDevices"])),created:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.GetDevices();case 2:this.$store.getters.devices,0;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},G=M,J=(n("5d7a"),Object(u["a"])(G,C,j,!1,null,"4facdeda",null)),N=J.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"flip-card"},[n("div",{staticClass:"flip-card-inner"},[n("div",{staticClass:"flip-card-front"},[n("div",{staticClass:"signin-form"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("h1",[t._v("Вход")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"txtb mt-4",attrs:{name:"username",disabled:t.loading,type:"text",placeholder:"Логин"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"txtb mt-4",attrs:{name:"password",disabled:t.loading,type:"password",placeholder:"Пароль"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),n("input",{staticClass:"signin-btn mt-4 mb-2",attrs:{disabled:t.loading,type:"submit",value:"Войти"}}),t.loading?n("div",{staticClass:"d-flex justify-content-center"},[t._m(0)]):t._e(),t.showError?n("h4",{staticClass:"text-danger mt-3"},[t._v("Введены неверные данные!")]):t._e()])])])])]),n("div",{staticClass:"shadow"})])},F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner-border text-primary mt-3",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Загрузка...")])])}],H={name:"Login",data:function(){return{form:{username:"",password:""},loading:!1,showError:!1}},methods:Object(O["a"])(Object(O["a"])({},Object(p["b"])(["LogIn"])),{},{submit:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,this.showError=!1,e=new FormData,e.append("username",this.form.username),e.append("password",this.form.password),t.next=8,this.LogIn(e);case 8:this.$router.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.showError=!0;case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[0,11,14,17]])}));function e(){return t.apply(this,arguments)}return e}()})},z=H,B=(n("0ae9"),Object(u["a"])(z,q,F,!1,null,"3715a2f2",null)),K=B.exports;r["default"].use(d["a"]);var Q=[{path:"/",name:"Home",component:N,meta:{requiresAuth:!0,title:"ShowingAds | Панель управления"}},{path:"/login",name:"Login",component:K,meta:{guest:!0,title:"ShowingAds | Авторизация"}}],V=new d["a"]({mode:"history",base:"/",routes:Q});V.beforeEach(function(t,e,n){if(document.title=t.meta.title,t.matched.some(function(t){return t.meta.requiresAuth})){if(y.getters.isAuthenticated)return void n();n("/login")}else n()});var W=V,X=n("5f5b"),Y=n("b1e0");n("f9e3"),n("2dd8");v.a.defaults.withCredentials=!0,v.a.defaults.baseURL="http://31.184.219.123:63880/",v.a.defaults.headers.post["Content-Type"]="application/json",v.a.defaults.headers.put["Content-Type"]="application/json",v.a.defaults.headers.delete["Content-Type"]="application/json",v.a.interceptors.response.use(void 0,function(t){if(t){var e=t.config;if(401===t.response.status&&!e._retry)return e._retry=!0,y.dispatch("LogOut"),W.push("/login")}}),r["default"].use(X["a"]),r["default"].use(Y["a"]),r["default"].config.productionTip=!0,new r["default"]({store:y,router:W,render:function(t){return t(l)}}).$mount("#app")},"5d7a":function(t,e,n){"use strict";n("7e8e")},"7e8e":function(t,e,n){},b58d:function(t,e,n){},c21b:function(t,e,n){},dcb2:function(t,e,n){}});
//# sourceMappingURL=app.dea2f37f.js.map